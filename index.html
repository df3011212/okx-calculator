<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>OKX 槓桿獲利計算工具</title>
  <!-- 你的 CSS -->
  <link rel="stylesheet" href="style.css">
  
</head>
<body>

  <!-- ✅ 加密貨幣搜尋彈窗 -->
  <div id="cryptoSearchModalOverlay">
    <div id="cryptoSearchModal">
      <h2>🔍 加密貨幣搜尋</h2>
      <input type="text" id="cryptoSearchInput" placeholder="搜尋幣種（如 BTC、ETH、OP）">
  
      <!-- 🔎 搜尋結果區塊移到最上方 -->
      <div class="crypto-result">
        <h3>🔎 搜尋結果</h3>
        <div id="searchResult"></div>
      </div>
  
      <div class="crypto-history">
        <h3>🕘 最近搜尋
          <button onclick="clearCryptoHistory()">🗑 一鍵清除</button>
        </h3>
        <div id="historyList"></div>
      </div>
  
      <div class="crypto-favorite">
        <h3>⭐ 我的最愛</h3>
        <div id="favoriteList"></div>
      </div>
  
      <div class="actions">
        <button onclick="closeCryptoSearch()">關閉</button>
      </div>
    </div>
  </div>
  <!--   ✅ 加密貨幣搜尋彈窗到這裡結束 -->

  <div class="container">
    <div class="section yellow">
      <h2>開單速算表</h2>

      <label>選擇幣種
        <div class="symbol-row">
          <input id="symbolInput" list="symbolList" />
          <button type="button" class="clear-btn" onclick="document.getElementById('symbolInput').value='';">清除</button>
        </div>
        <datalist id="symbolList"></datalist>
      </label>
      
      

      <label>本金 USDT
        <input id="capital" type="number" value="1658"/>
      </label>

      <label>首次開倉價格（手動/市價切換）</label>
      <div class="price-row">
        <input id="entryPrice" type="number" step="0.00001"/>
        <button id="togglePriceBtn">使用限價</button>
      </div>

      <label>保證金比例 (%)
        <input id="marginRatio" type="number" value="5"/>
      </label>

      <label>止損比例 (%)
        <input id="stoploss" type="number" value="7.52"/>
      </label>

      <label>最大虧損 USDT
        <input id="maxLoss" type="number" value="300"/>
      </label>

      <!-- 兩欄結果網格 -->
      <div class="results-grid">
        <div class="result-item">槓桿倍數：<span id="leverage"></span> 倍</div>
        <div class="result-item">總持倉量：<span id="position"></span></div>
        <div class="result-item">做多 成本：約 <span id="longMargin"></span> USDT</div>
        <div class="result-item">做空 成本：約 <span id="shortMargin"></span> USDT</div>
        <div class="result-item">剩餘可用資金：<span id="available"></span> USDT</div>
        <div class="result-item">維持保證金率：<span id="maintMarginRatio"></span>%</div>
        <div class="result-item">預估強平價格：<span id="liqPrice"></span> USDT</div>
      </div>

      <button id="saveBtn">💾 儲存紀錄</button>
    </div>
  </div>

  <!-- 浮動按鈕：功能 & 書籤 -->
  <button id="newFeatureBtn">🔧 功能</button>
  <button id="toggleHistoryBtn">📚 書籤</button>

  <!-- 書籤側欄 -->
  <div id="historySidebar">
    <h3>📖 書籤紀錄</h3>
    <div id="historyList"></div>
  </div>

  <!-- 功能選單 -->
  <div id="featureMenu" class="feature-menu-hidden">
    <button id="featureCloseBtn" class="feature-close">×</button>
    <div class="feature-title">功能選單</div>
    <div class="feature-menu-grid">
      <button data-feature="manualAvg">手動均價計算</button>
      <button data-feature="specifiedAvg">指定均價計算</button>
      <button data-feature="quickRevenge">反擊速算表</button>
      <button data-feature="advRevenge">高級反擊速算表</button>
    </div>
    <div id="featureContent" style="display:none;"></div>
  </div>

  <!-- 載入各功能模組 -->
  <script src="js/calc.js"></script>
  <script src="js/history.js"></script>
  <script src="js/features/manualAvg.js"></script>
  <script src="js/features/specifiedAvg.js"></script>
  <script src="js/features/quickRevenge.js"></script>
  <script src="js/features/advRevenge.js"></script>
  <script src="js/feature.js"></script>
  <script src="js/main.js"></script>


</body>
</html>
